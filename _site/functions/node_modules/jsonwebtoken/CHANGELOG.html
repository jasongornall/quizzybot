<h1 id="change-log">Change Log</h1>

<p>All notable changes to this project will be documented in this file starting from version <strong>v4.0.0</strong>.
This project adheres to <a href="http://semver.org/">Semantic Versioning</a>.</p>

<h2 id="741---2017-05-17">7.4.1 - 2017-05-17</h2>

<ul>
  <li>bump ms to v2 due a ReDoS vulnerability (#352) (<a href="https://github.com/auth0/node-jsonwebtoken/commit/adcfd6ae4088c838769d169f8cd9154265aa13e0">adcfd6ae4088c838769d169f8cd9154265aa13e0</a>)</li>
</ul>

<h2 id="740---2017-04-24">7.4.0 - 2017-04-24</h2>

<ul>
  <li>Add docs about numeric date fields (<a href="https://github.com/auth0/node-jsonwebtoken/commit/659f73119900a4d837650d9b3f5af4e64a2f843b">659f73119900a4d837650d9b3f5af4e64a2f843b</a>)</li>
  <li>Make Options object optional for callback-ish sign (<a href="https://github.com/auth0/node-jsonwebtoken/commit/e202c4fd00c35a24e9ab606eab89186ade13d0cc">e202c4fd00c35a24e9ab606eab89186ade13d0cc</a>)</li>
</ul>

<h2 id="730---2017-02-13">7.3.0 - 2017-02-13</h2>

<ul>
  <li>Add more information to <code class="highlighter-rouge">maxAge</code> option in README (<a href="https://github.com/auth0/node-jsonwebtoken/commit/1b0592e99cc8def293eed177e2575fa7f1cf7aa5">1b0592e99cc8def293eed177e2575fa7f1cf7aa5</a>)</li>
  <li>Add <code class="highlighter-rouge">clockTimestamp</code> option to <code class="highlighter-rouge">verify()</code> you can set the current time in seconds with it (#274) (<a href="https://github.com/auth0/node-jsonwebtoken/commit/8fdc1504f4325e7003894ffea078da9cba5208d9">8fdc1504f4325e7003894ffea078da9cba5208d9</a>)</li>
  <li>Fix handling non string tokens on <code class="highlighter-rouge">verify()</code> input (#305) (<a href="https://github.com/auth0/node-jsonwebtoken/commit/1b6ec8d466504f58c5a6e2dae3360c828bad92fb">1b6ec8d466504f58c5a6e2dae3360c828bad92fb</a>), closes <a href="https://github.com/auth0/node-jsonwebtoken/issues/305">#305</a></li>
  <li>Fixed a simple typo in docs (#287) (<a href="https://github.com/auth0/node-jsonwebtoken/commit/a54240384e24e18c00e75884295306db311d0cb7">a54240384e24e18c00e75884295306db311d0cb7</a>), closes <a href="https://github.com/auth0/node-jsonwebtoken/issues/287">#287</a></li>
  <li>Raise jws.decode error to avoid confusion with “invalid token” error  (#294) (<a href="https://github.com/auth0/node-jsonwebtoken/commit/7f68fe06c88d5c5653785bd66bc68c5b20e1bd8e">7f68fe06c88d5c5653785bd66bc68c5b20e1bd8e</a>)</li>
  <li>rauchg/ms.js changed to zeit/ms (#303) (<a href="https://github.com/auth0/node-jsonwebtoken/commit/35d84152a6b716d757cb5b1dd3c79fe3a1bc0628">35d84152a6b716d757cb5b1dd3c79fe3a1bc0628</a>)</li>
</ul>

<h2 id="721---2016-12-07">7.2.1 - 2016-12-07</h2>

<ul>
  <li>add nsp check to find vulnerabilities on npm test (<a href="https://github.com/auth0/node-jsonwebtoken/commit/4219c34b5346811c07f520f10516cc495bcc70dd">4219c34b5346811c07f520f10516cc495bcc70dd</a>)</li>
  <li>revert to joi@^6 to keep ES5 compatibility (<a href="https://github.com/auth0/node-jsonwebtoken/commit/51d4796c07344bf817687f7ccfeef78f00bf5b4f">51d4796c07344bf817687f7ccfeef78f00bf5b4f</a>)</li>
</ul>

<h2 id="720---2016-12-06">7.2.0 - 2016-12-06</h2>

<ul>
  <li>improve the documentation for expiration (<a href="https://github.com/auth0/node-jsonwebtoken/commit/771e0b5f9bed90771fb79140eb38e51a3ecac8f0">771e0b5f9bed90771fb79140eb38e51a3ecac8f0</a>)</li>
  <li>Restructured a sentence (<a href="https://github.com/auth0/node-jsonwebtoken/commit/ccc7610187a862f7a50177eadc9152eef26cd065">ccc7610187a862f7a50177eadc9152eef26cd065</a>)</li>
  <li>Allow <code class="highlighter-rouge">keyid</code> on <code class="highlighter-rouge">sign</code>. (<a href="https://github.com/auth0/node-jsonwebtoken/commit/b412be91b89acb3a742bb609d3b54e47e1dfc441">b412be91b89acb3a742bb609d3b54e47e1dfc441</a>)</li>
  <li>upgrade joi (<a href="https://github.com/auth0/node-jsonwebtoken/commit/715e3d928023d414d45c6dc3f096a7c8448139ae">715e3d928023d414d45c6dc3f096a7c8448139ae</a>)</li>
  <li>upgrade to latest nodes and Travis infrastructure (<a href="https://github.com/auth0/node-jsonwebtoken/commit/3febcc1dd23ecdec1abbf89313959941d15eb47a">3febcc1dd23ecdec1abbf89313959941d15eb47a</a>)</li>
</ul>

<h2 id="7110---2016-12-06">7.1.10 - 2016-12-06</h2>

<ul>
  <li>Bump node-jws version number (<a href="https://github.com/auth0/node-jsonwebtoken/commit/07813dd7194630c9f452684279178af76464a759">07813dd7194630c9f452684279178af76464a759</a>)</li>
  <li>improve the documentation for expiration (<a href="https://github.com/auth0/node-jsonwebtoken/commit/771e0b5f9bed90771fb79140eb38e51a3ecac8f0">771e0b5f9bed90771fb79140eb38e51a3ecac8f0</a>)</li>
</ul>

<h2 id="719---2016-08-11">7.1.9 - 2016-08-11</h2>

<ul>
  <li>Revert “Merge branch ‘venatir-master’” (<a href="https://github.com/auth0/node-jsonwebtoken/commit/d06359ef3b4e619680e043ee7c16adda16598f52">d06359ef3b4e619680e043ee7c16adda16598f52</a>)</li>
</ul>

<h2 id="718---2016-08-10">7.1.8 - 2016-08-10</h2>

<ul>
  <li>Fixed tests, however typ: ‘JWT’ should not be in the options at all, so please review other tests (<a href="https://github.com/auth0/node-jsonwebtoken/commit/01903bcdc61b4ed429acbbd1fe0ffe0db364473b">01903bcdc61b4ed429acbbd1fe0ffe0db364473b</a>)</li>
  <li>Removing unnecessary extra decoding. jwtString is already verified as valid and signature checked (<a href="https://github.com/auth0/node-jsonwebtoken/commit/55d5834f7b637011e1d8b927ff78a92a5fd521cf">55d5834f7b637011e1d8b927ff78a92a5fd521cf</a>)</li>
  <li>update changelog (<a href="https://github.com/auth0/node-jsonwebtoken/commit/5117aacd0118a10331889a64e61d8186112d8a23">5117aacd0118a10331889a64e61d8186112d8a23</a>)</li>
</ul>

<h2 id="717---2016-07-29">7.1.7 - 2016-07-29</h2>

<ul>
  <li>Use lodash.once instead of unlicensed/unmaintained cb (<a href="https://github.com/auth0/node-jsonwebtoken/commit/3ac95ad93ef3068a64e03d8d14deff231b1ed529">3ac95ad93ef3068a64e03d8d14deff231b1ed529</a>)</li>
</ul>

<h2 id="716---2016-07-15">7.1.6 - 2016-07-15</h2>

<ul>
  <li>fix issue with buffer payload. closes #216 (<a href="https://github.com/auth0/node-jsonwebtoken/commit/6b50ff324b4dfd2cb0e49b666f14a6672d015b22">6b50ff324b4dfd2cb0e49b666f14a6672d015b22</a>), closes <a href="https://github.com/auth0/node-jsonwebtoken/issues/216">#216</a></li>
</ul>

<h2 id="715---2016-07-15">7.1.5 - 2016-07-15</h2>

<ul>
  <li>update jws in package.json (<a href="https://github.com/auth0/node-jsonwebtoken/commit/b6260951eefc68aae5f4ede359210761f901ff7a">b6260951eefc68aae5f4ede359210761f901ff7a</a>)</li>
</ul>

<h2 id="714---2016-07-14">7.1.4 - 2016-07-14</h2>

<ul>
  <li>add redundant test (<a href="https://github.com/auth0/node-jsonwebtoken/commit/bece8816096f324511c3efcb8db0e64b75d757a1">bece8816096f324511c3efcb8db0e64b75d757a1</a>)</li>
  <li>fix an issue of double callback on error (<a href="https://github.com/auth0/node-jsonwebtoken/commit/758ca5eeca2f1b06c32c9fce70642bf488b2e52b">758ca5eeca2f1b06c32c9fce70642bf488b2e52b</a>)</li>
</ul>

<h2 id="712---2016-07-12">7.1.2 - 2016-07-12</h2>

<ul>
  <li>do not stringify the payload when signing async - closes #224 (<a href="https://github.com/auth0/node-jsonwebtoken/commit/084f537d3dfbcef2bea411cc0a1515899cc8aa21">084f537d3dfbcef2bea411cc0a1515899cc8aa21</a>), closes <a href="https://github.com/auth0/node-jsonwebtoken/issues/224">#224</a></li>
</ul>

<h2 id="711---2016-07-12">7.1.1 - 2016-07-12</h2>

<ul>
  <li>do not mutate options in jwt.verify, closes #227 (<a href="https://github.com/auth0/node-jsonwebtoken/commit/63263a28a268624dab0927b9ad86fffa44a10f84">63263a28a268624dab0927b9ad86fffa44a10f84</a>), closes <a href="https://github.com/auth0/node-jsonwebtoken/issues/227">#227</a></li>
  <li>refactor into multiple files (<a href="https://github.com/auth0/node-jsonwebtoken/commit/e11d505207fa33501298300c9accbfb809d8748d">e11d505207fa33501298300c9accbfb809d8748d</a>)</li>
</ul>

<h2 id="710---2016-07-12">7.1.0 - 2016-07-12</h2>

<ul>
  <li>Exp calculated based on iat. fix #217 (<a href="https://github.com/auth0/node-jsonwebtoken/commit/757a16e0e35ad19f9e456820f55d5d9f3fc76aee">757a16e0e35ad19f9e456820f55d5d9f3fc76aee</a>), closes <a href="https://github.com/auth0/node-jsonwebtoken/issues/217">#217</a></li>
</ul>

<h2 id="700---2016-05-19">7.0.0 - 2016-05-19</h2>

<ul>
  <li>change jwt.sign to return errors on callback instead of throwing errors (<a href="https://github.com/auth0/node-jsonwebtoken/commit/1e46c5a42aa3dab8478efa4081d8f8f5c5485d56">1e46c5a42aa3dab8478efa4081d8f8f5c5485d56</a>)</li>
</ul>

<h2 id="620---2016-04-29">6.2.0 - 2016-04-29</h2>

<ul>
  <li>add support for <code class="highlighter-rouge">options.clockTolerance</code> to <code class="highlighter-rouge">jwt.verify</code> (<a href="https://github.com/auth0/node-jsonwebtoken/commit/65ddea934f226bf06bc9d6a55be9587515cfc38d">65ddea934f226bf06bc9d6a55be9587515cfc38d</a>)</li>
</ul>

<h2 id="612---2016-04-29">6.1.2 - 2016-04-29</h2>

<ul>
  <li>fix sign method for node.js 0.12. closes #193 (<a href="https://github.com/auth0/node-jsonwebtoken/commit/9c38374142d3929be3c9314b5e9bc5d963c5955f">9c38374142d3929be3c9314b5e9bc5d963c5955f</a>), closes <a href="https://github.com/auth0/node-jsonwebtoken/issues/193">#193</a></li>
  <li>improve async test (<a href="https://github.com/auth0/node-jsonwebtoken/commit/7b0981380ddc40a5f1208df520631785b5ffb85a">7b0981380ddc40a5f1208df520631785b5ffb85a</a>)</li>
</ul>

<h2 id="610---2016-04-27">6.1.0 - 2016-04-27</h2>

<ul>
  <li>verify unsigned tokens (<a href="https://github.com/auth0/node-jsonwebtoken/commit/ec880791c10ed5ef7c8df7bf28ebb95c810479ed">ec880791c10ed5ef7c8df7bf28ebb95c810479ed</a>)</li>
</ul>

<h2 id="601---2016-04-27">6.0.1 - 2016-04-27</h2>

<p>This was an immediate change after publishing 6.0.0.</p>

<ul>
  <li>throw error on invalid options when the payload is not an object (<a href="https://github.com/auth0/node-jsonwebtoken/commit/304f1b33075f79ed66f784e27dc4f5307aa39e27">304f1b33075f79ed66f784e27dc4f5307aa39e27</a>)</li>
</ul>

<h2 id="600---2016-04-27">6.0.0 - 2016-04-27</h2>

<ul>
  <li>Change .sign to standard async callback (<a href="https://github.com/auth0/node-jsonwebtoken/commit/50873c7d45d2733244d5da8afef3d1872e657a60">50873c7d45d2733244d5da8afef3d1872e657a60</a>)</li>
  <li>
    <p>Improved the options for the <code class="highlighter-rouge">sign</code> method (<a href="https://github.com/auth0/node-jsonwebtoken/commit/53c3987b3cc34e95eb396b26fc9b051276e2f6f9">53c3987b3cc34e95eb396b26fc9b051276e2f6f9</a>)</p>

    <ul>
      <li>throw error on invalid options like <code class="highlighter-rouge">expiresIn</code> when the payload is not an object (<a href="https://github.com/auth0/node-jsonwebtoken/commit/304f1b33075f79ed66f784e27dc4f5307aa39e27">304f1b33075f79ed66f784e27dc4f5307aa39e27</a>)</li>
      <li><code class="highlighter-rouge">expiresInMinutes</code> and <code class="highlighter-rouge">expiresInSeconds</code> are deprecated and no longer supported.</li>
      <li><code class="highlighter-rouge">notBeforeInMinutes</code> and <code class="highlighter-rouge">notBeforeInSeconds</code> are deprecated and no longer supported.</li>
      <li><code class="highlighter-rouge">options</code> are strongly validated.</li>
      <li><code class="highlighter-rouge">options.expiresIn</code>, <code class="highlighter-rouge">options.notBefore</code>, <code class="highlighter-rouge">options.audience</code>, <code class="highlighter-rouge">options.issuer</code>, <code class="highlighter-rouge">options.subject</code> and <code class="highlighter-rouge">options.jwtid</code> are mutually exclusive with <code class="highlighter-rouge">payload.exp</code>, <code class="highlighter-rouge">payload.nbf</code>, <code class="highlighter-rouge">payload.aud</code>, <code class="highlighter-rouge">payload.iss</code></li>
      <li><code class="highlighter-rouge">options.algorithm</code> is properly validated.</li>
      <li><code class="highlighter-rouge">options.headers</code> is renamed to <code class="highlighter-rouge">options.header</code>.</li>
    </ul>
  </li>
  <li>update CHANGELOG to reflect most of the changes. closes #136 (<a href="https://github.com/auth0/node-jsonwebtoken/commit/b87a1a8d2e2533fbfab518765a54f00077918eb7">b87a1a8d2e2533fbfab518765a54f00077918eb7</a>), closes <a href="https://github.com/auth0/node-jsonwebtoken/issues/136">#136</a></li>
  <li>update readme (<a href="https://github.com/auth0/node-jsonwebtoken/commit/53a88ecf4494e30e1d62a1cf3cc354650349f486">53a88ecf4494e30e1d62a1cf3cc354650349f486</a>)</li>
</ul>

<h2 id="570---2016-02-16">5.7.0 - 2016-02-16</h2>

<ul>
  <li>add support for validating multiples issuers. closes #163 (<a href="https://github.com/auth0/node-jsonwebtoken/commit/39d9309ae05648dbd72e5fd1993df064ad0e8fa5">39d9309ae05648dbd72e5fd1993df064ad0e8fa5</a>), closes <a href="https://github.com/auth0/node-jsonwebtoken/issues/163">#163</a></li>
</ul>

<h2 id="561---2016-02-16">5.6.1 - 2016-02-16</h2>

<ul>
  <li>5.6.1 (<a href="https://github.com/auth0/node-jsonwebtoken/commit/06d8209d499dbc9a8dd978ab6cbb9c6818fde203">06d8209d499dbc9a8dd978ab6cbb9c6818fde203</a>)</li>
  <li>fix wrong error when setting expiration on non-object payload. closes #153 (<a href="https://github.com/auth0/node-jsonwebtoken/commit/7f7d76edfd918d6afc7c7cead888caa42ccaceb4">7f7d76edfd918d6afc7c7cead888caa42ccaceb4</a>), closes <a href="https://github.com/auth0/node-jsonwebtoken/issues/153">#153</a></li>
</ul>

<h2 id="560---2016-02-16">5.6.0 - 2016-02-16</h2>

<ul>
  <li>added missing validations of sub and jti (<a href="https://github.com/auth0/node-jsonwebtoken/commit/a1affe960d0fc52e9042bcbdedb65734f8855580">a1affe960d0fc52e9042bcbdedb65734f8855580</a>)</li>
  <li>Fix tests in jwt.rs.tests.js which causes 4 to fail (<a href="https://github.com/auth0/node-jsonwebtoken/commit/8aedf2b1f575b0d9575c1fc9f2ac7bc868f75ff1">8aedf2b1f575b0d9575c1fc9f2ac7bc868f75ff1</a>)</li>
  <li>Update README.md (<a href="https://github.com/auth0/node-jsonwebtoken/commit/349b7cd00229789b138928ca060d3ef015aedaf9">349b7cd00229789b138928ca060d3ef015aedaf9</a>)</li>
</ul>

<h2 id="554---2016-01-04">5.5.4 - 2016-01-04</h2>

<ul>
  <li>minor (<a href="https://github.com/auth0/node-jsonwebtoken/commit/46552e7c45025c76e3f647680d7539a66bfac612">46552e7c45025c76e3f647680d7539a66bfac612</a>)</li>
</ul>

<h2 id="553---2016-01-04">5.5.3 - 2016-01-04</h2>

<ul>
  <li>add a console.warn on invalid options for string payloads (<a href="https://github.com/auth0/node-jsonwebtoken/commit/71200f14deba0533d3261266348338fac2d14661">71200f14deba0533d3261266348338fac2d14661</a>)</li>
  <li>minor (<a href="https://github.com/auth0/node-jsonwebtoken/commit/65b1f580382dc58dd3da6f47a52713776fd7cdf2">65b1f580382dc58dd3da6f47a52713776fd7cdf2</a>)</li>
</ul>

<h2 id="552---2016-01-04">5.5.2 - 2016-01-04</h2>

<ul>
  <li>fix signing method with sealed objects, do not modify the params object. closes #147 (<a href="https://github.com/auth0/node-jsonwebtoken/commit/be9c09af83b09c9e72da8b2c6166fa51d92aeab6">be9c09af83b09c9e72da8b2c6166fa51d92aeab6</a>), closes <a href="https://github.com/auth0/node-jsonwebtoken/issues/147">#147</a></li>
</ul>

<h2 id="551---2016-01-04">5.5.1 - 2016-01-04</h2>

<ul>
  <li>fix nbf verification. fix #152 (<a href="https://github.com/auth0/node-jsonwebtoken/commit/786d37b299c67771b5e71a2ca476666ab0f97d98">786d37b299c67771b5e71a2ca476666ab0f97d98</a>), closes <a href="https://github.com/auth0/node-jsonwebtoken/issues/152">#152</a></li>
</ul>

<h2 id="550---2015-12-28">5.5.0 - 2015-12-28</h2>

<ul>
  <li>improvements to nbf and jti claims (<a href="https://github.com/auth0/node-jsonwebtoken/commit/46372e928f6d2e7398f9b88022ca617d2a3b0699">46372e928f6d2e7398f9b88022ca617d2a3b0699</a>)</li>
  <li>Remove duplicate payload line (fix bug in IE strict mode) (<a href="https://github.com/auth0/node-jsonwebtoken/commit/8163d698e0c5ad8c44817a5dcd42a15d7e9c6bc8">8163d698e0c5ad8c44817a5dcd42a15d7e9c6bc8</a>)</li>
  <li>Remove duplicate require(‘ms’) line (<a href="https://github.com/auth0/node-jsonwebtoken/commit/7c00bcbcbf8f7503a1070b394a165eccd41de66f">7c00bcbcbf8f7503a1070b394a165eccd41de66f</a>)</li>
  <li>Update README to reflect addition of async sign (<a href="https://github.com/auth0/node-jsonwebtoken/commit/d661d4b6f68eb417834c99b36769444723041ccf">d661d4b6f68eb417834c99b36769444723041ccf</a>)</li>
</ul>

<h2 id="540---2015-10-02">5.4.0 - 2015-10-02</h2>

<ul>
  <li>deprecate expireInMinutes and expireInSeconds - in favor of expiresIn (<a href="https://github.com/auth0/node-jsonwebtoken/commit/39ecc6f8f310f8462e082f1d53de0b4222b29b6f">39ecc6f8f310f8462e082f1d53de0b4222b29b6f</a>)</li>
</ul>

<h2 id="530---2015-10-02">5.3.0 - 2015-10-02</h2>

<ul>
  <li>5.3.0 (<a href="https://github.com/auth0/node-jsonwebtoken/commit/5d559ced3fbf10c1adae2e5792deda06ea89bcd3">5d559ced3fbf10c1adae2e5792deda06ea89bcd3</a>)</li>
  <li>minor (<a href="https://github.com/auth0/node-jsonwebtoken/commit/6e81ff87a3799b0e56db09cbae42a97e784716c4">6e81ff87a3799b0e56db09cbae42a97e784716c4</a>)</li>
</ul>

<h2 id="510---2015-10-02">5.1.0 - 2015-10-02</h2>

<ul>
  <li>added async signing (<a href="https://github.com/auth0/node-jsonwebtoken/commit/9414fbcb15a1f9cf4fe147d070e9424c547dabba">9414fbcb15a1f9cf4fe147d070e9424c547dabba</a>)</li>
  <li>Update README.md (<a href="https://github.com/auth0/node-jsonwebtoken/commit/40b2aaaa843442dfb8ee7b574f0a788177e7c904">40b2aaaa843442dfb8ee7b574f0a788177e7c904</a>)</li>
</ul>

<h2 id="505---2015-08-19">5.0.5 - 2015-08-19</h2>

<ul>
  <li>add ms dep to package.json (<a href="https://github.com/auth0/node-jsonwebtoken/commit/f13b3fb7f29dff787e7c91ebe2eb5adeeb05f251">f13b3fb7f29dff787e7c91ebe2eb5adeeb05f251</a>)</li>
  <li>add note to explain, related to #96 #101 #6 (<a href="https://github.com/auth0/node-jsonwebtoken/commit/dd8969e0e6ed0bcb9cae905d2b1a96476bd85da3">dd8969e0e6ed0bcb9cae905d2b1a96476bd85da3</a>)</li>
  <li>add tests for options.headers (<a href="https://github.com/auth0/node-jsonwebtoken/commit/7787dd74e705787c39a871ca29c75a2e0a3948ac">7787dd74e705787c39a871ca29c75a2e0a3948ac</a>)</li>
  <li>add tests for verify expires (<a href="https://github.com/auth0/node-jsonwebtoken/commit/d7c5793d98c300603440ab460c11665f661ad3a0">d7c5793d98c300603440ab460c11665f661ad3a0</a>)</li>
  <li>add verify option maxAge (with tests) (<a href="https://github.com/auth0/node-jsonwebtoken/commit/49d54e54f7e70b1c53a2e4ee67e116c907d75319">49d54e54f7e70b1c53a2e4ee67e116c907d75319</a>)</li>
  <li>fix spelling error in error message (<a href="https://github.com/auth0/node-jsonwebtoken/commit/8078b11b224fa05ac9003ca5aa2c85e9f0128cfb">8078b11b224fa05ac9003ca5aa2c85e9f0128cfb</a>)</li>
  <li>Fix typo options.header is not a documented option + (<a href="https://github.com/auth0/node-jsonwebtoken/commit/5feaa5b962ccbddeff054817a410f7b0c1e6ce7f">5feaa5b962ccbddeff054817a410f7b0c1e6ce7f</a>)</li>
  <li>update JWT spec link. closes #112 (<a href="https://github.com/auth0/node-jsonwebtoken/commit/f5fa50f797456a12240589161835c7ea30807195">f5fa50f797456a12240589161835c7ea30807195</a>), closes <a href="https://github.com/auth0/node-jsonwebtoken/issues/112">#112</a></li>
</ul>

<h2 id="503---2015-07-15">5.0.3 - 2015-07-15</h2>

<ul>
  <li>Added nbf support (<a href="https://github.com/auth0/node-jsonwebtoken/commit/f26ba4e2fa197a20497632b63ffcd13ae93aacc4">f26ba4e2fa197a20497632b63ffcd13ae93aacc4</a>)</li>
  <li>Added support for subject and jwt id (<a href="https://github.com/auth0/node-jsonwebtoken/commit/ab76ec5bc554e2d1e25376ddb7cea711d86af651">ab76ec5bc554e2d1e25376ddb7cea711d86af651</a>)</li>
  <li>Fix <code class="highlighter-rouge">this</code> referring to the global object instead of <code class="highlighter-rouge">module.exports</code> in <code class="highlighter-rouge">verify()</code> (<a href="https://github.com/auth0/node-jsonwebtoken/commit/93f554312e37129027fcf4916f48cb8d1b53588c">93f554312e37129027fcf4916f48cb8d1b53588c</a>)</li>
  <li>Fix typo, line 139 README, complete option for .decode. (<a href="https://github.com/auth0/node-jsonwebtoken/commit/59c110aeb8c7c1847ef2ffd77702d13627c89e10">59c110aeb8c7c1847ef2ffd77702d13627c89e10</a>)</li>
  <li>minor (<a href="https://github.com/auth0/node-jsonwebtoken/commit/61ff1172272b582902313e958058ff22413494af">61ff1172272b582902313e958058ff22413494af</a>)</li>
</ul>

<h2 id="502---2015-06-15">5.0.2 - 2015-06-15</h2>

<ul>
  <li>fix typo in docs . closes #86 (<a href="https://github.com/auth0/node-jsonwebtoken/commit/3d3413221f36acef4dfd1cbed87f1f3565cd6f84">3d3413221f36acef4dfd1cbed87f1f3565cd6f84</a>), closes <a href="https://github.com/auth0/node-jsonwebtoken/issues/86">#86</a></li>
</ul>

<h2 id="501---2015-05-15">5.0.1 - 2015-05-15</h2>

<ul>
  <li>Add option to return header and payload when decoding. (<a href="https://github.com/auth0/node-jsonwebtoken/commit/7254e011b59f892d1947e6c11819281adac7069d">7254e011b59f892d1947e6c11819281adac7069d</a>)</li>
  <li>Avoid uncaught “SyntaxError: Unexpected token ͧ” error. (<a href="https://github.com/auth0/node-jsonwebtoken/commit/0dc59cd6ee15d83a606acffa7909ee76176ae186">0dc59cd6ee15d83a606acffa7909ee76176ae186</a>)</li>
  <li>Document complete option in README. (<a href="https://github.com/auth0/node-jsonwebtoken/commit/ec32b20241a74d9681ea26e1a7024b4642468c00">ec32b20241a74d9681ea26e1a7024b4642468c00</a>)</li>
  <li>Fix example in README, silence verbose logging. (<a href="https://github.com/auth0/node-jsonwebtoken/commit/ba3174d10033c41e9c211a38f1cc67f74fbd7f69">ba3174d10033c41e9c211a38f1cc67f74fbd7f69</a>)</li>
  <li>Fix link to auth0.com in README (<a href="https://github.com/auth0/node-jsonwebtoken/commit/1b3c5ff72c9bc25e9271646e679f3080f2a042a0">1b3c5ff72c9bc25e9271646e679f3080f2a042a0</a>)</li>
  <li>Immediate return if not decoded. (<a href="https://github.com/auth0/node-jsonwebtoken/commit/851bda2b10168f3269c3da6e74d310742f31a193">851bda2b10168f3269c3da6e74d310742f31a193</a>)</li>
  <li>Prevent throw on undefined/null secret (<a href="https://github.com/auth0/node-jsonwebtoken/commit/0fdf78d4dbf609455f3277d6169a987aef0384d4">0fdf78d4dbf609455f3277d6169a987aef0384d4</a>)</li>
  <li>Removed path from test (<a href="https://github.com/auth0/node-jsonwebtoken/commit/d6240e24186732d368bffe21143becf44c38f0d6">d6240e24186732d368bffe21143becf44c38f0d6</a>)</li>
  <li>Simplified checking for missing key (<a href="https://github.com/auth0/node-jsonwebtoken/commit/f1cffd033bffc44f20558eda4a797c3fa2f4ee05">f1cffd033bffc44f20558eda4a797c3fa2f4ee05</a>)</li>
  <li>Typo (<a href="https://github.com/auth0/node-jsonwebtoken/commit/ffe68dbe0219bab535c1018448eb4c0b22f1f902">ffe68dbe0219bab535c1018448eb4c0b22f1f902</a>)</li>
  <li>Update CHANGELOG.md (<a href="https://github.com/auth0/node-jsonwebtoken/commit/927cce0dad1bc9aad75aeef53e276cf4cfc0d776">927cce0dad1bc9aad75aeef53e276cf4cfc0d776</a>)</li>
  <li>Update CHANGELOG.md (<a href="https://github.com/auth0/node-jsonwebtoken/commit/6879e0fdde222995c70a3a69a4af94993d9c667e">6879e0fdde222995c70a3a69a4af94993d9c667e</a>)</li>
  <li>Update CHANGELOG.md (<a href="https://github.com/auth0/node-jsonwebtoken/commit/c5596c10e8705727fa13e0394184a606083078bc">c5596c10e8705727fa13e0394184a606083078bc</a>)</li>
  <li>Update CHANGELOG.md (<a href="https://github.com/auth0/node-jsonwebtoken/commit/07541f0315f26d179e1cde92732b6124d6869b6f">07541f0315f26d179e1cde92732b6124d6869b6f</a>)</li>
  <li>Update CHANGELOG.md (<a href="https://github.com/auth0/node-jsonwebtoken/commit/e6465d48ddd1dc2c3297229b28c78fd5490a2ba9">e6465d48ddd1dc2c3297229b28c78fd5490a2ba9</a>)</li>
</ul>

<h2 id="500---2015-04-11">[5.0.0] - 2015-04-11</h2>

<h3 id="changed">Changed</h3>

<ul>
  <li>[sign] Only set defautl <code class="highlighter-rouge">iat</code> if the user does not specify that argument.</li>
</ul>

<p>https://github.com/auth0/node-jsonwebtoken/commit/e900282a8d2dff1d4dec815f7e6aa7782e867d91
  https://github.com/auth0/node-jsonwebtoken/commit/35036b188b4ee6b42df553bbb93bc8a6b19eae9d
  https://github.com/auth0/node-jsonwebtoken/commit/954bd7a312934f03036b6bb6f00edd41f29e54d9
  https://github.com/auth0/node-jsonwebtoken/commit/24a370080e0b75f11d4717cd2b11b2949d95fc2e
  https://github.com/auth0/node-jsonwebtoken/commit/a77df6d49d4ec688dfd0a1cc723586bffe753516</p>

<h3 id="security">Security</h3>

<ul>
  <li>[verify] Update to jws@^3.0.0 and renaming <code class="highlighter-rouge">header.alg</code> mismatch exception to <code class="highlighter-rouge">invalid algorithm</code> and adding more mismatch tests.</li>
</ul>

<p>As <code class="highlighter-rouge">jws@3.0.0</code> changed the verify method signature to be <code class="highlighter-rouge">jws.verify(signature, algorithm, secretOrKey)</code>, the token header must be decoded first in order to make sure that the <code class="highlighter-rouge">alg</code> field matches one of the allowed <code class="highlighter-rouge">options.algorithms</code>. After that, the now validated <code class="highlighter-rouge">header.alg</code> is passed to <code class="highlighter-rouge">jws.verify</code></p>

<p>As the order of steps has changed, the error that was thrown when the JWT was invalid is no longer the <code class="highlighter-rouge">jws</code> one:</p>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">[Error:</span><span class="w"> </span><span class="err">Invalid</span><span class="w"> </span><span class="err">token:</span><span class="w"> </span><span class="err">no</span><span class="w"> </span><span class="err">header</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">signature</span><span class="w"> </span><span class="err">'a.b.c']</span><span class="w"> </span><span class="err">code:</span><span class="w"> </span><span class="err">'MISSING_HEADER',</span><span class="w"> </span><span class="err">signature:</span><span class="w"> </span><span class="err">'a.b.c'</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>That old error (removed from jws) has been replaced by a <code class="highlighter-rouge">JsonWebTokenError</code> with message <code class="highlighter-rouge">invalid token</code>.</p>

<blockquote>
  <p>Important: versions &gt;= 4.2.2 this library are safe to use but we decided to deprecate everything <code class="highlighter-rouge">&lt; 5.0.0</code> to prevent security warnings from library <code class="highlighter-rouge">node-jws</code> when doing <code class="highlighter-rouge">npm install</code>.</p>
</blockquote>

<p>https://github.com/auth0/node-jsonwebtoken/commit/634b8ed0ff5267dc25da5c808634208af109824e
  https://github.com/auth0/node-jsonwebtoken/commit/9f24ffd5791febb449d4d03ff58d7807da9b9b7e
  https://github.com/auth0/node-jsonwebtoken/commit/19e6cc6a1f2fd90356f89b074223b9665f2aa8a2
  https://github.com/auth0/node-jsonwebtoken/commit/1e4623420159c6410616f02a44ed240f176287a9
  https://github.com/auth0/node-jsonwebtoken/commit/954bd7a312934f03036b6bb6f00edd41f29e54d9
  https://github.com/auth0/node-jsonwebtoken/commit/24a370080e0b75f11d4717cd2b11b2949d95fc2e
  https://github.com/auth0/node-jsonwebtoken/commit/a77df6d49d4ec688dfd0a1cc723586bffe753516</p>

<h2 id="422---2015-03-26">[4.2.2] - 2015-03-26</h2>
<h3 id="fixed">Fixed</h3>

<ul>
  <li>[asymmetric-keys] Fix verify for RSAPublicKey formated keys (<code class="highlighter-rouge">jfromaniello - awlayton</code>)
  https://github.com/auth0/node-jsonwebtoken/commit/402794663b9521bf602fcc6f2e811e7d3912f9dc
  https://github.com/auth0/node-jsonwebtoken/commit/8df6aabbc7e1114c8fb3917931078254eb52c222</li>
</ul>

<h2 id="421---2015-03-17">[4.2.1] - 2015-03-17</h2>
<h3 id="fixed-1">Fixed</h3>

<ul>
  <li>[asymmetric-keys] Fixed issue when public key starts with BEING PUBLIC KEY (https://github.com/auth0/node-jsonwebtoken/issues/70) (<code class="highlighter-rouge">jfromaniello</code>)
  https://github.com/auth0/node-jsonwebtoken/commit/7017e74db9b194448ff488b3e16468ada60c4ee5</li>
</ul>

<h2 id="420---2015-03-16">[4.2.0] - 2015-03-16</h2>
<h3 id="security-1">Security</h3>

<ul>
  <li>[asymmetric-keys] Making sure a token signed with an asymmetric key will be verified using a asymmetric key.
When the verification part was expecting a token digitally signed with an asymmetric key (RS/ES family) of algorithms an attacker could send a token signed with a symmetric algorithm (HS* family).</li>
</ul>

<p>The issue was caused because the same signature was used to verify both type of tokens (<code class="highlighter-rouge">verify</code> method parameter: <code class="highlighter-rouge">secretOrPublicKey</code>).</p>

<p>This change adds a new parameter to the verify called <code class="highlighter-rouge">algorithms</code>. This can be used to specify a list of supported algorithms, but the default value depends on the secret used: if the secretOrPublicKey contains the string <code class="highlighter-rouge">BEGIN CERTIFICATE</code> the default is <code class="highlighter-rouge">[ 'RS256','RS384','RS512','ES256','ES384','ES512' ]</code> otherwise is <code class="highlighter-rouge">[ 'HS256','HS384','HS512' ]</code>. (<code class="highlighter-rouge">jfromaniello</code>)
  https://github.com/auth0/node-jsonwebtoken/commit/c2bf7b2cd7e8daf66298c2d168a008690bc4bdd3
  https://github.com/auth0/node-jsonwebtoken/commit/1bb584bc382295eeb7ee8c4452a673a77a68b687</p>

<h2 id="410---2015-03-10">[4.1.0] - 2015-03-10</h2>
<h3 id="changed-1">Changed</h3>
<ul>
  <li>Assume the payload is JSON even when there is no <code class="highlighter-rouge">typ</code> property. <a href="https://github.com/auth0/node-jsonwebtoken/commit/5290db1bd74f74cd38c90b19e2355ef223a4d931">5290db1</a></li>
</ul>

<h2 id="400---2015-03-06">[4.0.0] - 2015-03-06</h2>
<h3 id="changed-2">Changed</h3>
<ul>
  <li>The default encoding is now utf8 instead of binary. <a href="https://github.com/auth0/node-jsonwebtoken/commit/92d33bd99a3416e9e5a8897d9ad8ff7d70a00bfd">92d33bd</a></li>
  <li>Add <code class="highlighter-rouge">encoding</code> as a new option to <code class="highlighter-rouge">sign</code>. <a href="https://github.com/auth0/node-jsonwebtoken/commit/1fc385ee10bd0018cd1441552dce6c2e5a16375f">1fc385e</a></li>
  <li>Add <code class="highlighter-rouge">ignoreExpiration</code> to <code class="highlighter-rouge">verify</code>. <a href="https://github.com/auth0/node-jsonwebtoken/commit/8d4da279e1b351ac71ace276285c9255186d549f">8d4da27</a></li>
  <li>Add <code class="highlighter-rouge">expiresInSeconds</code> to <code class="highlighter-rouge">sign</code>. <a href="https://github.com/auth0/node-jsonwebtoken/commit/dd156cc30f17028744e60aec0502897e34609329">dd156cc</a></li>
</ul>

<h3 id="fixed-2">Fixed</h3>
<ul>
  <li>Fix wrong error message when the audience doesn’t match. <a href="https://github.com/auth0/node-jsonwebtoken/commit/44e3c8d757e6b4e2a57a69a035f26b4abec3e327">44e3c8d</a></li>
  <li>Fix wrong error message when the issuer doesn’t match. <a href="https://github.com/auth0/node-jsonwebtoken/commit/44e3c8d757e6b4e2a57a69a035f26b4abec3e327">44e3c8d</a></li>
  <li>Fix wrong <code class="highlighter-rouge">iat</code> and <code class="highlighter-rouge">exp</code> values when signing with <code class="highlighter-rouge">noTimestamp</code>. <a href="https://github.com/auth0/node-jsonwebtoken/commit/331b7bc9cc335561f8806f2c4558e105cb53e0a6">331b7bc</a></li>
</ul>
